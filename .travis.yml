language: java
jdk:
  - oraclejdk8

before_install: "git clone -b travis `git config --get remote.origin.url` target/travis"
script: "[ ${TRAVIS_PULL_REQUEST} = 'false' ] && mvn clean deploy --settings target/travis/settings.xml || mvn clean verify --settings target/travis/settings.xml"

branches:
  except:
    - travis

env:
  global:
    - secure: "JI4mzJiulaXnQMwPvxhMu7dzr8l7nwrIHNn1VVySvByRJzYvQVteo6o6Qiz/KNbDGfl7CgTGECdiJ7uXXymHOeIJJotmzgjImXBl/eBL8WtS1SwjG9q0KC3xxkzanbYMg4V8OvK7zkErESskNl3atW02nw6VPp9t6bbhDBjuxLc="
    - secure: "lOB7O83SaemxNjPtDnaFbk36QQZ7Bm2FpyzKd3VTuR+oZ4QsX7IcF78vRq+yYDLkSLk84N/N85t9/N7NJfb6qT1Ek9SD3nIlNgYPWzJL0sTHpQn9camZjCSnw/IgA6P6QpuyWtOmYqy+WLnoRgXchGFxYDyUpDmcnuXNZyaouDM="